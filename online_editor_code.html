<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" >
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>EditArea - the code editor in a textarea</title>
	<!-- sintax highlight -->
	<script language="Javascript" type="text/javascript" src="./edit_area/edit_area_full.js"></script>	
	
	<!-- auto complete plugin-->
	<script language="Javascript" type="text/javascript" src="./auto-complete/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="./auto-complete/jquery-ui.css"/>
	<script language="Javascript" type="text/javascript" src="./auto-complete/jquery-ui.min.js"></script>
	<!-- auto complete keywords-->
	<script language="Javascript" type="text/javascript" src="./auto-complete/keyword_auto_complete.js"></script>
	
	<!-- setup edit_area-->
	<script language="Javascript" type="text/javascript">
		// initialisation sintax highlight edita_area
		editAreaLoader.init({
			id: "id_code_area_ii"	// id of the textarea to transform		
			,start_highlight: true	// if start with highlight
			,allow_resize: "both"
			,allow_toggle: false
			,word_wrap: true
			,language: "en"
			,syntax: "php"	
			,toolbar: "search, go_to_line, |, undo, redo, |, select_font, |, syntax_selection, |, change_smooth_selection, highlight, reset_highlight, |, help"
			,syntax_selection_allow: "css,html,js,php,python,vb,xml,c,cpp,sql,basic,pas,brainfuck"			
			,show_line_colors: true
			
		});
		
		// callback functions								
	</script>
</head>

<body>
<h2>Online Editor</h2>

<!-- auto complete -->


<form action='' method='post'>		
		<textarea id="id_code_area_ii" style="height:550px; width: 100%; border:none; " name="code_area">
		</textarea>		
</form>

<div>
<strong> <span>auto complete </span> <strong>
</div>
<div>
	<select id="syntax_selection" filespecific="yes" onchange="javascript:editArea.execCommand('change_syntax',this.value)">
  
	</select> 
</div>
 
<div> 
<textarea id="id_code_area_i" style="height:50px; width: 33%"; > </textarea> 
</div>

<!-- auto-complete textarea-->
<script language="Javascript" type="text/javascript">	

/*** complete textarea ***/
$(function() {
var lentex = document.getElementById('id_code_area_i').value;
var availableTagsthis = availableTagsJS;
var minWordLength = lentex.length;
function split(val) {
return val.split(' ');
} 
function extractLast(term) {
return split(term).pop();
}
$("#id_code_area_i") // jQuery Selector
// don't navigate away from the field on tab when selecting an item
.bind("keydown", function(event) {
if (event.keyCode === $.ui.keyCode.TAB && $(this).data("ui-autocomplete").menu.active) {
event.preventDefault();
}
}).autocomplete({
minLength: minWordLength,
source: function(request, response) {
// delegate back to autocomplete, but extract the last term
var term = extractLast(request.term);
if(term.length >= minWordLength){
response($.ui.autocomplete.filter(availableTagsthis, term ));
}
},
focus: function() {
// prevent value inserted on focus
return false;
},
select: function(event, ui) {
var terms = split(this.value);
// remove the current input
terms.pop();
// add the selected item
terms.push(ui.item.value);
// add placeholder to get the comma-and-space at the end
terms.push("");
this.value = terms.join(" ");
editAreaLoader.setValue("id_code_area_ii", editAreaLoader.getValue("id_code_area_ii") + editAreaLoader.getValue("id_code_area_i"));
editAreaLoader.setValue("id_code_area_i", "");

return false;
}
});
});

/***insert auto-complete string for text area ***/
$("#id_code_area_i").bind("keydown", function(event) {
var charCode = event.keyCode;
	if(charCode == 13 || charCode== 32){
	editAreaLoader.setValue("id_code_area_ii", editAreaLoader.getValue("id_code_area_ii") + editAreaLoader.getValue("id_code_area_i"));
	editAreaLoader.setValue("id_code_area_i", "");	
}
});
 

</script>


</body>
</html>
